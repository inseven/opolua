INCLUDE "system.oxh"

PROC main:
    GLOBAL ev%(6)
    
    WHILE 1
        GETEVENT ev%()
        printEvent:
    ENDWH
ENDP

PROC printEvent:
    LOCAL k%
    k% = ev%(1)
    IF (ev%(1) AND $400) = 0
        PRINT "Key press", k%, "mod="; ev%(2) AND $FF, "rep="; ev%(2) / 256
    ELSE
        k% = ev%(1) - $400
        VECTOR k%
            fg, bg, nop, nop, cmd
            keyDown, keyUp
            pen, penDown, penUp
        ENDV
    nop::
        PRINT "Got event", ev%(1)
        RETURN
    fg::
        PRINT "Foreground!"
        RETURN
    bg::
        PRINT "Background!"
        RETURN
    cmd::
        PRINT "Cmd", GETCMD$
        RETURN
    keyDown::
        PRINT "Key down", ev%(3), "t="; ev%(2)
        RETURN
    keyUp::
        PRINT "Key up", ev%(3), "t="; ev%(2)
        RETURN
    pen::
        PRINT "Pen"
        RETURN
    penDown::
        PRINT "Pen down"
        RETURN
    penUp::
        PRINT "Pen up"
        RETURN
    ENDIF
ENDP
